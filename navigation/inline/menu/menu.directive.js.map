{"version":3,"sources":["../../../inline/menu/menu.directive.ts"],"names":[],"mappings":"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","file":"menu.directive.js","sourceRoot":"","sourcesContent":["import {Directive, Input, Output, EventEmitter, ElementRef, Renderer, HostListener, OnDestroy} from '@angular/core';\n\nexport enum KeyCode {\n  RETURN = 13,\n  ENTER = 14,\n  DOWN = 40\n}\n\nconst SELECTOR: string = '[menu]';\n\n\nexport class MenuDirective implements OnDestroy {\n   focusActivate = false;\n   clickToggle = true;\n   mouseActivate = false;\n\n   opened = new EventEmitter();\n   closed = new EventEmitter();\n\n  private focusListenerUnsubscribe: Function;\n  private clickListenerUnsubscribe: Function;\n\n  private Open: boolean = false;\n  private JustActivatedByFocus: boolean = false;\n\n  public constructor(private elementRef: ElementRef, private renderer: Renderer) {\n  }\n\n   onHostMouseOver() {\n    if (this.mouseActivate) {\n      this.open();\n    }\n  }\n\n   onHostMouseOut() {\n    if (this.mouseActivate) {\n      this.close();\n    }\n  }\n\n   onHostFocus() {\n    if (this.focusActivate && !this.Open) {\n      this.open();\n      this.JustActivatedByFocus = true;\n\n      // clicking on the menu open control fires both click and focus events, so\n      // allow time for the click event to be ignored by our click @HostListener\n\n      setTimeout(() => {\n        this.JustActivatedByFocus = false;\n      }, 200);\n    }\n  }\n\n   onHostClick() {\n    // clicking on the menu open control fires both click and focus events, so\n    // there is no need to open a menu that was just opened by the focus event\n\n    if (this.JustActivatedByFocus) {\n      this.JustActivatedByFocus = false;\n      return;\n    }\n\n    if (this.clickToggle) {\n      this.Open ? this.close() : this.open();\n      return;\n    }\n\n    if (!this.Open) {\n      this.open();\n    }\n  }\n\n   onHostKeydown(event: KeyboardEvent) {\n    if (<number>KeyCode.DOWN === event.keyCode || <number>KeyCode.ENTER === event.keyCode || <number>KeyCode.RETURN === event.keyCode) {\n      this.open();\n    }\n  }\n\n   onHostBlur(event: FocusEvent) {\n    if (event.relatedTarget && event.relatedTarget !== this.elementRef.nativeElement) {\n      this.close();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.removeListeners();\n  }\n\n  private checkFocus(event: Event): void {\n    if (event.target !== this.elementRef.nativeElement && !this.elementRef.nativeElement.contains(event.target)) {\n      this.close();\n    }\n  }\n\n  private open(): void {\n    this.elementRef.nativeElement.classList.add('open');\n\n    this.Open = true;\n\n    this.addListeners();\n\n    this.opened.emit(this.elementRef.nativeElement);\n  }\n\n  private close(): void {\n    this.elementRef.nativeElement.classList.remove('open');\n\n    this.Open = false;\n\n    this.removeListeners();\n\n    this.closed.emit(this.elementRef.nativeElement);\n  }\n\n  private addListeners(): void {\n    this.focusListenerUnsubscribe = this.renderer.listenGlobal('document', 'focus', this.checkFocus.bind(this));\n    this.clickListenerUnsubscribe = this.renderer.listenGlobal('document', 'click', this.checkFocus.bind(this));\n  }\n\n  private removeListeners(): void {\n    if (null != this.clickListenerUnsubscribe) {\n      this.clickListenerUnsubscribe();\n    }\n\n    if (null != this.focusListenerUnsubscribe) {\n      this.focusListenerUnsubscribe();\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: SELECTOR\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'focusActivate': [{ type: Input },],\n'clickToggle': [{ type: Input },],\n'mouseActivate': [{ type: Input },],\n'opened': [{ type: Output },],\n'closed': [{ type: Output },],\n'onHostMouseOver': [{ type: HostListener, args: ['mouseover', ['$event'], ] },],\n'onHostMouseOut': [{ type: HostListener, args: ['mouseout', ['$event'], ] },],\n'onHostFocus': [{ type: HostListener, args: ['focusin', ['$event'], ] },],\n'onHostClick': [{ type: HostListener, args: ['click', ['$event'], ] },],\n'onHostKeydown': [{ type: HostListener, args: ['keydown', ['$event'], ] },],\n'onHostBlur': [{ type: HostListener, args: ['blur', ['$event'], ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}